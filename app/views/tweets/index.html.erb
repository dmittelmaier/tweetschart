<script type="text/javascript" charset="utf-8">
  $(function() {
    Highcharts.setOptions({
      global: {
        useUTC: false      }
    });
    $('#tweets_chart').highcharts({
      chart: {
        type: 'column'
      },
      title: { 
        text: 'Tweets frequency for past 24 hours' 
      },
      xAxis: {
        type: 'datetime'
      },
      yAxis: {
        title: { 
          text: 'Quantity'
        }
      },
      series: [{
        name: 'Tweets',
        pointInterval: <%= @step * 1000 %>,
        pointStart: <%= @start_time * 1000 %>,
        data: <%= (@start_time..DateTime.now.to_i).step(@step).each_cons(2).map { |period| 
      Tweet.count_on(period[0], period[1]) }.to_a %>
        }]
    });
  });
</script>
<div id="tweets_chart" style="width: 100%; height: 300px;">
</div>

